# Feature Specification: 表格视图增强 - 紧凑显示、搜索与分页优化

**Feature Branch**: `003-15`
**Created**: 2025-10-16
**Status**: Draft
**Input**: User description: "网站列表和账号列表的表格增强功能：网站列表紧凑显示、搜索功能、分页调整为15条；账号列表改为表格展示并支持分页"

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 网站列表紧凑显示和分页优化 (Priority: P1) 🎯 MVP

用户在管理大量网站时，需要在单屏内查看更多网站记录，以提高浏览和查找效率。通过紧凑的表格显示和增加每页显示数量，用户可以减少翻页次数，更快速地定位目标网站。

**Why this priority**: 这是最基础的用户体验改进，直接影响用户浏览网站列表的效率。紧凑显示使信息密度进一步提升，从每页10条增加到15条可减少30%的翻页操作。这是独立的视觉优化，不依赖其他功能。

**Independent Test**: 访问网站管理页面，添加20+个网站后，验证：(1) 表格行间距和内边距明显减小，单屏显示更多记录；(2) 分页器显示每页15条数据；(3) 所有列的信息清晰可读，操作按钮不拥挤。

**Acceptance Scenarios**:

1. **Given** 用户已添加25个网站，**When** 访问网站管理页面，**Then** 第一页显示15个网站，表格行高紧凑，列间距合理
2. **Given** 用户在第一页查看网站列表，**When** 滚动到页面底部，**Then** 分页器显示"第1页，共2页"，可点击跳转到第2页
3. **Given** 用户在第2页查看剩余10个网站，**When** 切换回第1页，**Then** 快速加载并显示前15个网站
4. **Given** 用户在紧凑模式下查看网站，**When** 鼠标悬停在某一行，**Then** 该行有明显的背景色高亮，便于识别当前行

---

### User Story 2 - 网站列表快速搜索 (Priority: P2)

用户拥有数十个甚至上百个网站时，通过翻页查找特定网站效率低下。用户需要一个搜索框，输入域名或显示名称的部分文字，即可立即筛选出匹配的网站，无需翻页。

**Why this priority**: 搜索功能是大数据量场景下的核心需求，显著提升查找效率。虽然重要，但紧凑显示是更基础的视觉优化，因此优先级稍低。搜索功能可以在紧凑显示完成后独立开发和测试。

**Independent Test**: 在网站列表页面顶部输入搜索框中输入"github"，验证：(1) 表格立即过滤出域名或显示名称包含"github"的网站；(2) 分页器根据搜索结果重新计算（如只有8条结果则显示"第1页，共1页"）；(3) 清空搜索框后，表格恢复显示所有网站。

**Acceptance Scenarios**:

1. **Given** 用户已添加50个网站，其中5个域名包含"google"，**When** 在搜索框输入"google"，**Then** 表格立即筛选出这5个网站，分页器显示"第1页，共1页"
2. **Given** 用户在搜索框输入"非存在的关键词xyz"，**When** 无任何网站匹配，**Then** 表格显示空状态提示"未找到匹配的网站，请尝试其他关键词"
3. **Given** 用户在搜索框输入"test"后看到3条结果，**When** 点击搜索框的清空按钮（X图标），**Then** 搜索框清空，表格恢复显示所有网站，分页器恢复正常
4. **Given** 用户在搜索框输入"git"（小写），**When** 网站显示名称包含"GitHub"（大写），**Then** 该网站仍然出现在搜索结果中（不区分大小写）
5. **Given** 用户在搜索框输入"exam"，**When** 某个网站的域名是"example.com"，**Then** 该网站出现在搜索结果中（部分匹配）

---

### User Story 3 - 账号列表表格化显示 (Priority: P3)

用户在查看某个网站的账号列表时，当前的卡片式布局在账号数量较多时需要大量滚动。用户需要将账号列表改为表格展示，以紧凑的方式显示用户名、密码（可切换显示/隐藏）、标签、备注等信息，并支持分页。

**Why this priority**: 与网站列表类似，表格化展示提升账号列表的信息密度和浏览效率。优先级低于网站列表功能，因为用户更频繁地查看网站列表，账号列表是次级页面。但这是独立的功能，可在网站列表优化完成后独立实施。

**Independent Test**: 为某个网站添加20+个账号后，访问该网站的账号列表页面，验证：(1) 账号以表格形式展示，包含用户名、密码（默认隐藏）、标签、备注、操作列；(2) 第一页显示15个账号；(3) 点击密码列的"眼睛"图标可切换显示/隐藏密码；(4) 点击"复制"图标可复制密码到剪贴板；(5) 点击"编辑"或"删除"按钮打开相应对话框。

**Acceptance Scenarios**:

1. **Given** 某网站有25个账号，**When** 访问该网站的账号列表页面，**Then** 第一页显示15个账号，表格包含用户名、密码（默认为"••••••••"）、标签、备注、操作列
2. **Given** 用户在账号列表第一页，**When** 点击某账号的密码列"眼睛"图标，**Then** 该账号的密码从"••••••••"切换为明文显示，图标从"Eye"变为"EyeOff"
3. **Given** 用户看到某账号的明文密码，**When** 点击该行的"复制"图标，**Then** 密码被复制到剪贴板，用户看到提示"密码已复制"
4. **Given** 用户在账号列表第一页，**When** 点击分页器的"下一页"，**Then** 表格切换到第二页，显示剩余10个账号
5. **Given** 某账号有较长的备注文字（超过100字），**When** 在表格中查看，**Then** 备注列显示前50字并添加"..."截断标记，鼠标悬停时显示完整备注
6. **Given** 某网站暂无账号，**When** 访问账号列表页面，**Then** 显示空状态卡片，提示"暂无账号，点击'添加账号'按钮创建第一个账号"

---

### User Story 4 - 账号列表紧凑显示优化 (Priority: P4)

在账号列表表格化的基础上，用户需要进一步优化表格的视觉密度，使其与网站列表保持一致的紧凑风格，在有限的屏幕空间内显示更多账号记录。

**Why this priority**: 这是对User Story 3的视觉增强，优先级最低。可以在账号列表表格化完成后，作为可选的优化项独立实施。不影响核心功能的可用性。

**Independent Test**: 对比优化前后的账号列表表格，验证：(1) 表格行高减小，单屏可显示更多账号；(2) 列间距和内边距适当减小但不影响可读性；(3) 操作按钮仍然易于点击，无误操作风险。

**Acceptance Scenarios**:

1. **Given** 用户在1080p屏幕上查看账号列表，**When** 应用紧凑模式，**Then** 单屏可见账号数量比优化前增加至少30%
2. **Given** 用户在紧凑模式下查看账号列表，**When** 鼠标悬停在某一行，**Then** 该行有明显的背景色高亮，便于识别
3. **Given** 用户在紧凑模式下查看密码列，**When** 点击"眼睛"或"复制"图标，**Then** 按钮响应准确，无误触其他行的按钮

---

### Edge Cases

- **搜索性能**: 当网站数量超过500个时，前端实时搜索是否会导致性能问题？（假设：500个网站以内前端过滤性能可接受）
- **搜索结果为空**: 用户输入搜索关键词后无匹配结果，如何提示用户？（显示友好的空状态提示）
- **分页边界**: 当搜索结果刚好为15的倍数时（如30条结果），分页器是否正确显示"第1页，共2页"？
- **密码显示状态切换**: 用户在账号列表中切换多个账号的密码显示状态，切换到下一页后再返回，之前的显示/隐藏状态是否保持？（假设：不保持，每次加载页面重置为隐藏状态）
- **长备注截断**: 账号备注超过200字时，表格单元格如何显示？（假设：截断显示前50字，鼠标悬停显示完整内容）
- **紧凑模式下的触摸操作**: 在触摸屏设备上，紧凑模式是否会导致按钮过小难以点击？（假设：保持最小触摸目标尺寸44x44px）
- **搜索与分页交互**: 用户在第3页进行搜索，搜索结果只有1页，是否自动跳转到第1页？（假设：是，重置到第1页）
- **空标签和备注**: 账号的标签和备注为空时，表格单元格如何显示？（显示"-"）

## Requirements *(mandatory)*

### Functional Requirements

**网站列表增强**:

- **FR-001**: 系统必须将网站列表表格的行高和内边距减小至紧凑模式，使单屏可见记录数量比当前增加至少30%
- **FR-002**: 系统必须将网站列表的默认分页大小从每页10条调整为每页15条
- **FR-003**: 系统必须在网站管理页面提供搜索框，允许用户输入关键词
- **FR-004**: 系统必须在用户输入搜索关键词时，实时过滤网站列表，仅显示域名或显示名称包含关键词的网站（不区分大小写）
- **FR-005**: 系统必须在搜索结果为空时，显示友好的空状态提示，引导用户尝试其他关键词
- **FR-006**: 系统必须在用户清空搜索框时，恢复显示所有网站
- **FR-007**: 系统必须根据搜索结果重新计算分页信息（总页数、当前页）

**账号列表改造**:

- **FR-008**: 系统必须将账号列表从卡片式布局改为表格布局
- **FR-009**: 账号列表表格必须包含以下列：用户名、密码、标签、备注、创建时间、更新时间、操作
- **FR-010**: 系统必须默认隐藏密码列的明文内容，显示为"••••••••"
- **FR-011**: 用户必须能够点击密码列的"眼睛"图标切换该账号密码的显示/隐藏状态
- **FR-012**: 用户必须能够点击密码列的"复制"图标，将密码复制到剪贴板
- **FR-013**: 系统必须为账号列表提供分页功能，默认每页显示15条账号
- **FR-014**: 账号列表表格必须保持编辑、删除操作功能，点击按钮打开相应的对话框
- **FR-015**: 系统必须在账号列表为空时，显示空状态提示，引导用户添加第一个账号

**紧凑模式优化**:

- **FR-016**: 账号列表表格必须应用紧凑模式的样式，减小行高和内边距
- **FR-017**: 系统必须在紧凑模式下保持良好的可读性和可操作性（按钮最小尺寸44x44px）

**响应式和视觉反馈**:

- **FR-018**: 网站列表和账号列表表格必须保持响应式布局，在小屏幕下适当隐藏次要列或支持横向滚动
- **FR-019**: 表格行必须在鼠标悬停时显示明显的背景色高亮，便于用户识别当前行

### Key Entities

本功能不涉及新增实体，仅优化现有实体的展示方式：

- **Website（网站）**: 已存在，属性包含 id, displayName, domain, tags, activeAccountCount, deletedAccountCount
- **Account（账号）**: 已存在，属性包含 id, username, password, notes, tags, createdAt, updatedAt

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 用户在网站列表页面单屏可见的网站数量比当前（约10条）增加至少50%（达到15条或以上）
- **SC-002**: 用户通过搜索框查找特定网站的时间，比手动翻页查找减少至少70%（从平均30秒降至10秒以内）
- **SC-003**: 用户在拥有100个网站时，通过搜索功能在3秒内找到目标网站
- **SC-004**: 账号列表表格化后，用户在单屏可见的账号数量比当前卡片布局增加至少2倍
- **SC-005**: 用户切换密码显示/隐藏状态的响应时间低于100毫秒，无明显延迟
- **SC-006**: 用户复制密码到剪贴板的操作成功率达到100%，且有明确的成功反馈
- **SC-007**: 网站列表和账号列表的表格在1080p屏幕下，紧凑模式的行高不超过40px，同时保持良好的可读性
- **SC-008**: 用户在触摸屏设备上操作紧凑模式的表格，误触率低于5%（按钮最小尺寸满足44x44px标准）
