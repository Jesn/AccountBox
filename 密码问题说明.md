# 数据库密码问题说明

## 问题原因

当前数据库已经用密码 `test123` 初始化了，而不是 `start.sh` 中提示的 `Test1234!`。

## 解决方案（二选一）

### 方案 1：使用当前密码 `test123`

如果你想继续使用当前数据库，请使用密码 `test123` 登录。

### 方案 2：重置数据库并使用 `Test1234!`

如果你想使用 `Test1234!` 作为密码，请按以下步骤操作：

1. **停止所有服务：**
   ```bash
   # 按 Ctrl+C 停止 start.sh，或者手动停止
   lsof -ti:5093 | xargs kill -9
   lsof -ti:5173 | xargs kill -9
   ```

2. **运行重置脚本：**
   ```bash
   cd /Users/darren/coding/cnb/AccountBox
   ./reset_db.sh
   ```

   脚本会：
   - 停止后端服务
   - 删除现有数据库
   - 提示你重新启动服务

3. **重新启动服务：**
   ```bash
   ./start.sh
   ```

   新版本的 `start.sh` 会：
   - 自动检测数据库状态
   - 如果数据库未初始化，自动使用 `Test1234!` 初始化
   - 启动完成后提示正确的密码

## 已改进的功能

### `start.sh` 脚本现在会：
1. ✅ 启动前检测是否有旧数据库，询问是否重置
2. ✅ 服务启动后自动检测初始化状态
3. ✅ 如果未初始化，自动使用 `Test1234!` 初始化
4. ✅ 在提示信息中显示实际可用的密码

### 新增 `reset_db.sh` 脚本：
- 快速重置数据库
- 自动停止后端服务
- 安全删除数据库文件

## 快速测试

测试当前密码是否正确：
```bash
curl -X POST 'http://localhost:5093/api/vault/unlock' \
  -H 'Content-Type: application/json' \
  -d '{"masterPassword":"test123"}' -s | jq .
```

测试新密码（重置后）：
```bash
curl -X POST 'http://localhost:5093/api/vault/unlock' \
  -H 'Content-Type: application/json' \
  -d '{"masterPassword":"Test1234!"}' -s | jq .
```
